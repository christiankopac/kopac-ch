{{- /* 
  Layout for generating the "New Articles" newsletter HTML.
  This layout lists posts from the current month.
*/ -}}
{{- $currentMonth := now.Format "2006-01" -}}
{{- $posts := where site.RegularPages "Section" "posts" -}}
{{- $newPosts := slice -}}

{{- range $posts -}}
    {{- if eq (.Date.Format "2006-01") $currentMonth -}}
        {{- $newPosts = $newPosts | append . -}}
    {{- end -}}
{{- end -}}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>New Articles - {{ now.Format "January 2006" }}</title>
</head>
<body>
    <!-- COPY FROM HERE -->
    <div class="content">
        {{- if $newPosts -}}
            {{- range $newPosts -}}
            <div class="article-item" style="margin-bottom: 32px; padding-bottom: 32px; border-bottom: 1px solid #c8d0c2;">
                <h2 class="article-title" style="font-size: 20px; font-weight: 600; margin: 0 0 8px 0; letter-spacing: -0.01em;">
                    <a href="{{ .Permalink }}" style="color: #1a1a1a; text-decoration: none;">{{ .Title }}</a>
                </h2>
                <div class="article-meta" style="font-size: 13px; color: #7a827a; margin-bottom: 12px;">
                    {{ .Date.Format "Jan 2, 2006" }} • {{ .ReadingTime }} min read
                </div>
                <p class="article-summary" style="font-size: 16px; color: #4a524a; margin: 0 0 16px 0; line-height: 1.6;">
                    {{ .Summary }}
                </p>
                <a href="{{ .Permalink }}" class="article-link" style="display: inline-block; font-size: 14px; font-weight: 500; color: #c75b4a; text-decoration: none;">Read Article →</a>
            </div>
            {{- end -}}
        {{- else -}}
            <p>No new articles found for {{ now.Format "January 2006" }}.</p>
        {{- end -}}
    </div>
    <!-- END COPY -->
</body>
</html>
